<html><head>
<meta http-equiv="content-type" content="text/html; charset="><!--  
  Name   : NOToolbar.jsp
  Author : Prateek Arora
  Purpose: NetStorm Launch screen . It provides following:
           - Link for Opening of Correlation GUI
           - Link for Opening of Admin GUI
           - Link for Opening of About GUI
         
  Notes  :    None
  Creation Date:
    03/31/10:Jyoti:3.6.2 - Initial Version

-->

<!--  
  Name   : header.jspf
  Author : Neeraj
  Purpose: This is for Admin GUI. It it to be included in all JSP
           on the top for for following :
           - Import of packages 
           - Initialization of beans and js
           - JSP variables which are common to all JSPs
  Notes  :
    None
  Modification History:
    15/01/09:Neeraj:3.2.2 - Initial Version


-->







<!-- This is required for firefox b'coz it does not refresh the screen.when we select the option then click on another tab or OK button after again open the same screen . It does not show the changed value means it takes value from the cache.when we reload the screen then it gives new value. -->







<script language="javascript" src="../js/sortableTable.js"></script>
<script language="javascript" src="../js/validation.js"></script>

<script language="javascript" src="../js/nsStringUtils.js"></script>
<script language="javascript" src="../js/nsDateUtils.js"></script>
<script language="javascript" src="../js/nsUtils.js"></script>

<script language="javascript" src="../js/help.js"></script>

<script language="javascript" src="adminUtils.js"></script>

<!-- Combo-handled YUI JS files: -->
<!--<script type="text/javascript" src="http://yui.yahooapis.com/combo?2.8.2r1/build/yahoo-dom-event/yahoo-dom-event.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/combo?&2.8.2r1/build/container/container_core-min.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/combo?2.8.2r1/build/menu/menu-min.js"></script>-->

<script language="javascript" src="../yui/js/yahoo-dom-event.js"></script>
<script language="javascript" src="../yui/js/container_core-min.js"></script>
<script language="javascript" src="../yui/js/menu-min.js"></script>

<!-- To be fixed later as it is redirecting to login.jsp again






  
 
-->




 

<script language="javascript">

var bolCmdError = false;
var strServerCheck = '';


  /*
  Name   : admCmdErrorCheck.jspf
  Author : Vikas
  Purpose: To show error message when error generated in execution of command
           
  Notes  :
    None
  Modification History:
    4/21/06: Vikas: 1.0 - Initial Version
*/

 
strServerCheck = 'NF'

  /*
  Name   : admCmdErrorCheck.jspf
  Author : Vikas
  Purpose: To show error message when error generated in execution of command
           
  Notes  :
    None
  Modification History:
    4/21/06: Vikas: 1.0 - Initial Version
*/

 
strTestSuitCheck = 'ls: cannot access /home/netstorm/Controller_Proxy/logs/tsr/: No such file or directory'

var sesLoginName = "netstorm";
var uri = "";

function onLoadFunction()
{
  if(bolCmdError)
     window.open('admCmdError.jsp', "", "height=500, width=600, toolbar=no, menubar=no, location=no, directories=no, resizable=no, status=no");
}

function closeWindow()
{
  //var browserName = navigator.appName;
  //var browserVer = parseInt(navigator.appVersion);

  var ie7 = (document.all && !window.opera && window.XMLHttpRequest) ? true : false;  

  if (ie7) 
  {  
    //This method is required to close a window without any prompt for IE7
    window.open('','_parent','');
    window.close();
  }
  else 
  {
    //This method is required to close a window without any prompt for IE6
    //this.focus();
    self.opener = this;
    self.close();
  }
}

function doRedirect()
{
  var height = 150;      //Set height
  if(sesLoginName == "admin")
    var width = 450;
  else  
    var width = 400;

  var name = "winname";  //Set window name
  var top = 20;          //Set distance from top
  var left = 20;         //Set distance from bottom
  
  if(uri.indexOf("about") != -1)
    openGUI('about');
  else if(uri.indexOf("admin") != -1)
    openGUI('admin');

  var strLoginName = 'netstorm';
  var strGroupName = 'netstorm';
  var strUserType = 'Engineers';
  
  if(document.location.search != '?strLoginName='+strLoginName+'&strGroupName='+strGroupName+ '&strUserType='+strUserType +'&toolbar=true')
  {
    windowName = getWindowNameForHost("toolbar");

    newwin = window.open(document.location + "&toolbar=true", windowName, "fullscreen=no,toolbar=no,status=no,menubar=no,scrollbars=no,resizable=no,directories=no,location=no,width=" + width + ",height=" + height + ",left=" + left + ",top=" + top);
        
    //newwin.focus();
    //self.opener = this;
    
    
    document.write("<br><br>");
    document.write("<table border='1' frame='box' rules='none'  width='100%' align='center' valign='top' cellspacing=0 cellpadding=0>");
    document.write("<tr><td width=15></td><td></td><td>&nbsp;</td></tr>");
    document.write("<tr><td></td><td><li>If you see this window, then your browser is not allowing to close the parent window.<br></td><td></td></tr>");
    document.write("<tr><td width=15></td><td><li>This is due to the default setting of Mozilla Firefox browser, which does not allow to close the parent window.<br></td><td></td><td></td></tr>");
    document.write("<tr><td width=15></td><td></td><td>&nbsp;</td></tr>");
    document.write("<tr><td width=15></td><td><li>To resolve this issue, please add the following line in the \< Mozilla Firefox Installation Path \>/defaults/pref/firefox.js file.<br></td><td></td></tr>");
    document.write("<tr><td width=15></td><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pref(\"dom.allow_scripts_to_close_windows\",true);</td></tr><td></td></font>");
    document.write("<tr><td width=15></td><td></td><td>&nbsp;</td></tr>");
    document.write("</table>");
    
    //self.close();
    closeWindow();

  }  
  else
  {
    document.write("<table width='100%' valign='top' border='0' cellpadding='0' cellspacing='0' id=headerWithOutScreenTitle>");
    document.write("<tr>");
    document.write("<td width=100% align=left valign=top><img src='../images/logo.png' width='160' height='47'></td>");
    //document.write("<td width=8% align=center><img src='../images/completeHelp.gif' width='42' height='19' style=cursor:help; title='Complete Help' onClick='javascript:openFullHelp();' tabindex='1'>");
    document.write("</td>");
    document.write("</tr>");
    document.write("</table>");

    document.write("<table class = borderTableHeader bgcolor=#8888FF width='99%' align='center' valign='top' cellspacing=0 cellpadding=0 >");
    document.write("<tr>");
    document.write("<td colspan='2' align='center'><br>");
  
    document.write("&nbsp;<input type=Button class=tollButton style='width:100;' value=Services name=Services onClick='javascript:openGUI(\"Services\");'>");   

    document.write("&nbsp;<input type=Button class=tollButton style='width:120;' value='Configuration' name='Configuration' onClick='javascript:openGUI(\"hpdConfiguration\");'>");   

    //Here we need to check again for null, if user attempt to open this file directly
    //then this session variable will be null, if not check then it will throw exception
    if((strLoginName != null) || (strGroupName != null) || (strUserType != null))
    if(strLoginName == 'admin')
    {
      document.write("&nbsp;<input type=Button class=tollButton style='width:60;' value=Admin name=Admin onclick='javascript:openGUI(\"admin\");'>");
    }
    
    document.write("&nbsp;<input type=Button class=tollButton style='width:60;' value=About name=About onclick = 'javascript:openGUI(\"about\");'>");
    
    document.write(" </td>");
    document.write("</tr>");
    document.write("<tr><td><br></td></tr>");
    document.write("</table>");
  }
}

function openFullHelp()
{
  var helpId = window.open("../../help/NetstormOnLineHelp.htm", "NetstormOnLineHelp", "toolbars=no,location=no,directories=no,status=no, menubar=no, scrollbars=yes, resizable=yes, copyhistory=no, left=50, top=50");
  helpId.focus();
}

// Move following 4 functions to common js file in future
function getWidth(value)
{
  return (parseInt(window.screen.availWidth) * value);
}

function getHeight(value)
{
  return (parseInt(window.screen.availHeight) * value);
}

// This function is in 3 places -
//   admim/index.jsp, recorder/recTestScript.jsp and controller/redirect.jsp
function getWindowOpenArg3(guiName)
{
  // for FireFox
  var width = getWidth(.95);
  var height = getHeight(.90);
  var top = getWidth(.02);
  var left = getWidth(.02);  
  
   
  var arg3ForOtherGui = "height=" + height +",width=" + width + ",top=0,left=0,toolbar=0,location=0,directories=0,resizable=1,scrollbars=1,status=1,menubar=0"; 
  
  var arg3ForAdmin = "height=" + 300 +",width=" + 300 + ",top=200,left=500,toolbar=0,location=0,directories=0,resizable=0,scrollbars=0,status=0,menubar=0";  

  var arg3ForAbout = "height=" + 300 +",width=" + 400 + ",top=200,left=500,toolbar=0,location=0,directories=0,resizable=0,scrollbars=0,status=0,menubar=0";  
  
  
  if(guiName == "about")
    return(arg3ForAbout);
  else if (guiName == "admin")
    return(arg3ForAdmin);
  else
    return(arg3ForOtherGui);  
}

// Start all GUI in full screen.
// For RTG GUI, do not display toolbar and location bar. Show only menu
function openGUI(guiName)
{

 // alert(guiName);
  var guiWindow = getWindowNameForHost(guiName);
  var arg3 =  getWindowOpenArg3(guiName);

  if (guiName == "Services")
    guiWindow = window.open("../correlation/corrServices.jsp", ""+guiWindow+"", arg3);
  if(guiName == "hpdConfiguration")
    guiWindow = window.open("../correlation/corrHpdMenu.jsp", ""+guiWindow+"", arg3);
  
  if (guiName == "about")
    guiWindow = window.open("about.jsp", ""+guiWindow+"", arg3);
  if (guiName == "admin")
    guiWindow = window.open("admin.jsp", ""+guiWindow+"", arg3);
    
  guiWindow.focus();
}


function doRedirectCorr()
{
  window.open("../correlation/corrServices.jsp","_self","fullscreen=no,toolbar=no,status=no,menubar=no,scrollbars=yes,resizable=yes,directories=no,location=no,titlebar=no");
}


</script>



<link rel="stylesheet" href="../css/Netstorm.css" type="text/css" media="all">
<title>NetFunction (Controller_Proxy) Launch Screen</title>
</head><body onload="onLoadFunction();">

<form name="frmMain" background="">
<input name="strOperName" value="" type="hidden">
<input name="strOperValue" value="" type="hidden">

<script>
  doRedirectCorr();
</script></form></body></html>